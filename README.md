# yamdb_final
## Описание
В данном проекте реализовано приложение Review и API для всех его моделей. Пользователям предоставляется возможность оставлять отзывы на различные произведения, присутствующие на ресурсе. А также комментировать отзывы других пользователей.
Реализована аутентификация по токен TokenAuthentication по email. Аутентифицированный пользователь авторизован на изменение и удаление своего контента; в остальных случаях доступ предоставляется только для чтения.
Также реализованы классы Администратора и Модератора. Администратор обладает правами добавления произведений и модерации контента других пользователей. Модератор только следит за контентом созданным другими пользователями.
Также в проекте реализована CI, в задачи которой после каждого пуша входит: тестирование проекта, создание докер-контейнера и развертывание проекта на удаленном сервере.

### Функционал
* Просмотр списка произведений, их средюню оценку отзывов на них и комментариев к отзывам
* Просмотр информации об отдельно взятом произведении, отзыве или комментарии

#### После регистрации в API, пользователю доступны:
* Создание и удаление отзывов на произведения
* Частичное и полное редактирование отзывов
* Создание и удаление комментариев
* Частичное и полное редактирование комментариев
* Возможность оставлять оценки на произведения

### В проекте используются:
* ##### Django v. 3.2
* ##### Django Rest Framework v. 3.12.4
* ##### Simple JWT v. 5.2.2
* ##### docker v. 23.0.4
* ##### docker-compose v. 1.29.2
* ##### python-dotenv v. 1.0.0
* ##### nginx
* ##### gunicorn v.20.0.4

## Шаблон наполнения .env файла:
```
DB_ENGINE=django.db.backends.postgresql
DB_NAME=имя базы данных
POSTGRES_USER=логин для подключенияк базе данных
POSTGRES_PASSWORD=пароль для подключения к БД
DB_HOST=название сервисса (контейнера)
DB_PORT=прот для подключения к БД
```

## Команды для запуска приложения в контейнерах:

> Клонируйте [репозиторий проекта](https://github.com/Sobiyk/infra_sp2)

```
docker-compose up -d --build
docker exec web python manage.py migrate 
docker exec web python manage.py createsuperuser
docker exec web python manage.py collectstatic --no-input
```

## Команда для заполнения базы данными:

Cкопируйте файл базы данных в контейнер:

> docker cp fixtures.json <id>:app/

Затем подгрузите их в базу данных внутри контейнера:

> docker exec web python manage.py loaddata fixtures.json

## Примеры запросов

* GET `http://127.0.0.1:8000/api/v1/titles/` --> вывод списка произведений
* POST `http://127.0.0.1:8000/api/v1/titles/` --> создание нового поста

  пример запроса:
                  {
                      "name": "string",
                      "year": 0,
                      "description": "string",
                      "genre": [
                          "string"
                      ],
                      "category": "string"
                  }  


##### Над проектом работал:
* [Собковский Кирилл](https://github.com/Sobiyk)
